#!/usr/bin/env bash

# Get the focused window's PID via xdotool
pid=$(xdotool getwindowfocus getwindowpid 2>/dev/null)

if [ -z "$pid" ]; then
    echo "/home/jack"
    exit
fi

# Get the newest child process (likely your shell)
ppid=$(pgrep --newest --parent "${pid}")

if [ -z "$ppid" ]; then
    ppid=$pid
fi

pp=$(readlink /proc/"${ppid}"/cwd 2>/dev/null)

if [ -z "$pp" ]; then
    echo "/home/jack"
else
    echo "$pp"
fi
